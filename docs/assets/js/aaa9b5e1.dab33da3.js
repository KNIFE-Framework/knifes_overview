"use strict";(globalThis.webpackChunkknife_preview=globalThis.webpackChunkknife_preview||[]).push([[6418],{6692:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"sk/knifes/K000067-github-deployment-strategie/K000067_docusaurus_config_ts_appendix","title":"K000067 Appendix \u2013 docusaurus.config.ts (ENV\u2011driven)","description":"-","source":"@site/docs/sk/knifes/K000067-github-deployment-strategie/K000067_docusaurus_config_ts_appendix.md","sourceDirName":"sk/knifes/K000067-github-deployment-strategie","slug":"/sk/knifes/K000067-github-deployment-strategie/K000067_docusaurus_config_ts_appendix","permalink":"/sk/knifes/K000067-github-deployment-strategie/K000067_docusaurus_config_ts_appendix","draft":false,"unlisted":false,"tags":[{"inline":true,"label":"KNIFE","permalink":"/tags/knife"}],"version":"current","frontMatter":{"fm_version":"1.0.1","fm_build":"2025-10-12T10:35:00Z","fm_version_comment":"Added field fm_version_comment to document reasons for FM updates","id":"K000067_docusaurus_config_ts_appendix","guid":"7c3ff713-c422-450c-a765-fe0ab6edc560","dao":"knife","title":"K000067 Appendix \u2013 docusaurus.config.ts (ENV\u2011driven)","description":"-","author":"Roman Kazi\u010dka","authors":["Roman Kazi\u010dka",""],"category":"-","type":"-","priority":"no","tags":["KNIFE"],"locale":"sk","created":"2025-09-24","modified":"-","status":"inprogress","privacy":"public","rights_holder_content":"Roman Kazi\u010dka","rights_holder_system":"Roman Kazi\u010dka (CAA/KNIFE/LetItGrow)","license":"CC-BY-NC-SA-4.0","disclaimer":"Use at your own risk. Methods provided as-is; participation is voluntary and context-aware.","copyright":"\xa9 2025 Roman Kazi\u010dka / SystemThinking","origin_repo":"","origin_repo_url":"","origin_commit":"","origin_system":"","author_id":"-","author_did":"-","fm_reserved1":"","fm_reserved2":""},"sidebar":"docs","previous":{"title":"GitHub Deployment Strategie - Pre Zvedav\xfdch","permalink":"/sk/knifes/K000067-github-deployment-strategie/K000067-github-deployment-strategie"},"next":{"title":"K000067 Appendix \u2013 Makefile pre GitHub Pages (A/B re\u017eimy)","permalink":"/sk/knifes/K000067-github-deployment-strategie/K000067_makefile_appendix"}}');var o=s(4848),r=s(8453);const t={fm_version:"1.0.1",fm_build:"2025-10-12T10:35:00Z",fm_version_comment:"Added field fm_version_comment to document reasons for FM updates",id:"K000067_docusaurus_config_ts_appendix",guid:"7c3ff713-c422-450c-a765-fe0ab6edc560",dao:"knife",title:"K000067 Appendix \u2013 docusaurus.config.ts (ENV\u2011driven)",description:"-",author:"Roman Kazi\u010dka",authors:["Roman Kazi\u010dka",""],category:"-",type:"-",priority:"no",tags:["KNIFE"],locale:"sk",created:"2025-09-24",modified:"-",status:"inprogress",privacy:"public",rights_holder_content:"Roman Kazi\u010dka",rights_holder_system:"Roman Kazi\u010dka (CAA/KNIFE/LetItGrow)",license:"CC-BY-NC-SA-4.0",disclaimer:"Use at your own risk. Methods provided as-is; participation is voluntary and context-aware.",copyright:"\xa9 2025 Roman Kazi\u010dka / SystemThinking",origin_repo:"",origin_repo_url:"",origin_commit:"",origin_system:"",author_id:"-",author_did:"-",fm_reserved1:"",fm_reserved2:""},a="K000067 Appendix \u2013 docusaurus.config.ts (ENV\u2011driven)",d={},c=[{value:"Kompletn\xfd pr\xedklad <code>docusaurus.config.ts</code>",id:"kompletn\xfd-pr\xedklad-docusaurusconfigts",level:2},{value:"Ako nastavujem ENV premenn\xe9",id:"ako-nastavujem-env-premenn\xe9",level:2},{value:"1) GitHub Actions",id:"1-github-actions",level:3},{value:"2) Lok\xe1lny build",id:"2-lok\xe1lny-build",level:3},{value:"Navbar/Linky \u2013 odpor\xfa\u010dania",id:"navbarlinky--odpor\xfa\u010dania",level:2},{value:"Docs\u2011only m\xf3d (ak nechce\u0161 homepage)",id:"docsonly-m\xf3d-ak-nechce\u0161-homepage",level:2},{value:"Volite\u013en\xe9: banner re\u017eimu pre DEV",id:"volite\u013en\xe9-banner-re\u017eimu-pre-dev",level:2},{value:"R\xfdchly checklist (pred deployom)",id:"r\xfdchly-checklist-pred-deployom",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"S\xfavisiace",id:"s\xfavisiace",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"k000067-appendix--docusaurusconfigts-envdriven",children:"K000067 Appendix \u2013 docusaurus.config.ts (ENV\u2011driven)"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"GUID:"})," ",(0,o.jsx)(n.code,{children:"7c3ff713-c422-450c-a765-fe0ab6edc560"}),"\n",(0,o.jsx)(n.strong,{children:"Status:"})," ",(0,o.jsx)(n.code,{children:"inprogress"})," \xb7 ",(0,o.jsx)(n.strong,{children:"Author:"})," Roman Kazi\u010dka \xb7 ",(0,o.jsx)(n.strong,{children:"License:"})," CC-BY-NC-SA-4.0"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Tento appendix prin\xe1\u0161a ",(0,o.jsx)(n.strong,{children:"univerz\xe1lny"})," ",(0,o.jsx)(n.code,{children:"docusaurus.config.ts"}),", ktor\xfd sa prisp\xf4sob\xed:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"GitHub Pages \u2013 project site"})," \u2192 ",(0,o.jsx)(n.code,{children:"url = https://ORG.github.io"}),", ",(0,o.jsx)(n.code,{children:"baseUrl = /REPO/"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Custom dom\xe9na"})," \u2192 ",(0,o.jsx)(n.code,{children:"url = https://sub.domain.tld"}),", ",(0,o.jsx)(n.code,{children:"baseUrl = /"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Prep\xednanie sa deje cez ",(0,o.jsx)(n.strong,{children:"ENV premenn\xfa"})," ",(0,o.jsx)(n.code,{children:"CUSTOM_DOMAIN"}),". Ak je pr\xe1zdna/nenastaven\xe1 \u21d2 GitHub Pages re\u017eim. Ak je vyplnen\xe1 \u21d2 custom dom\xe9na."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.h2,{id:"kompletn\xfd-pr\xedklad-docusaurusconfigts",children:["Kompletn\xfd pr\xedklad ",(0,o.jsx)(n.code,{children:"docusaurus.config.ts"})]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["Ulo\u017e ako ",(0,o.jsx)(n.code,{children:"docusaurus.config.ts"})," do kore\u0148a projektu. Ponechaj TypeScript (Docusaurus ho podporuje)."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import type {Config} from '@docusaurus/types';\nimport {themes as prismThemes} from 'prism-react-renderer';\n\n// Bezpe\u010dn\xe9 \u010d\xedtanie premenn\xfdch z prostredia\nconst env = process.env as Record<string, string | undefined>;\n\n// Z GitHub Actions poskytovan\xe1 premenn\xe1 v tvare \"ORG/REPO\"\nconst repoPath = env.GITHUB_REPOSITORY || '';\nconst [org = 'ORG', repo = 'REPO'] = repoPath.split('/');\n\n// Prep\xedna\u010d: ak CUSTOM_DOMAIN existuje \u2192 vlastn\xe1 dom\xe9na, inak GH Pages project site\nconst usingCustom = !!env.CUSTOM_DOMAIN && env.CUSTOM_DOMAIN.trim() !== '';\nconst siteUrl = usingCustom\n  ? `https://${env.CUSTOM_DOMAIN}`\n  : `https://${org}.github.io`;\nconst baseUrl = usingCustom ? '/' : `/${repo}/`;\n\nconst config: Config = {\n  title: 'Class Site',\n  tagline: 'Docs & projects',\n  url: siteUrl,        // \u21aa\ufe0f men\xed sa pod\u013ea CUSTOM_DOMAIN\n  baseUrl: baseUrl,    // \u21aa\ufe0f '/' (custom) vs '/REPO/' (GH Pages)\n  trailingSlash: true, // stabiln\xe9 URL (menej 301/404)\n\n  // u\u017eito\u010dn\xe9 meta\n  organizationName: org,\n  projectName: repo,\n\n  // build pr\xedsnos\u0165\n  onBrokenLinks: 'throw',\n  onBrokenMarkdownLinks: 'warn',\n\n  // i18n (ponechaj pod\u013ea projektu)\n  i18n: { defaultLocale: 'sk', locales: ['sk'] },\n\n  // Preset \u2013 Classic\n  presets: [\n    [\n      'classic',\n      {\n        docs: {\n          routeBasePath: 'docs', // alebo '/' pre docs-only m\xf3d\n          sidebarPath: require.resolve('./sidebars.js'),\n        },\n        blog: false,\n        theme: {\n          customCss: require.resolve('./src/css/custom.css'),\n        },\n      },\n    ],\n  ],\n\n  themeConfig: {\n    navbar: {\n      title: 'Class',\n      items: [\n        {to: '/docs/intro', label: 'Docs', position: 'left'},\n        // \u26a0\ufe0f Pou\u017e\xedvaj `to:` (nie absol\xfatne URL), Docusaurus prid\xe1 baseUrl s\xe1m\n      ],\n    },\n    footer: {\n      style: 'dark',\n      copyright: `\xa9 ${new Date().getFullYear()} Class`,\n    },\n    prism: {\n      theme: prismThemes.github,\n      darkTheme: prismThemes.dracula,\n    },\n  },\n};\n\nexport default config;\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"ako-nastavujem-env-premenn\xe9",children:"Ako nastavujem ENV premenn\xe9"}),"\n",(0,o.jsx)(n.h3,{id:"1-github-actions",children:"1) GitHub Actions"}),"\n",(0,o.jsxs)(n.p,{children:["V ",(0,o.jsx)(n.code,{children:".github/workflows/deploy.yml"})," prira\u010f ",(0,o.jsx)(n.code,{children:"CUSTOM_DOMAIN"})," z repo/environ. variables (alebo nechaj pr\xe1zdne):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"jobs:\n  build:\n    runs-on: ubuntu-latest\n    env:\n      CUSTOM_DOMAIN: ${{ vars.CUSTOM_DOMAIN || '' }}\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with: { node-version: 20 }\n      - run: npm ci\n      - run: npm run build\n      - uses: actions/upload-pages-artifact@v3\n        with: { path: build }\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Project URL (GH Pages)"}),": ",(0,o.jsx)(n.code,{children:"vars.CUSTOM_DOMAIN"})," nechaj pr\xe1zdne \u2192 ",(0,o.jsx)(n.code,{children:"url=https://ORG.github.io"}),", ",(0,o.jsx)(n.code,{children:"baseUrl=/${repo}/"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Custom dom\xe9na"}),": nastav ",(0,o.jsx)(n.code,{children:"vars.CUSTOM_DOMAIN = sub.domain.tld"})," (v ",(0,o.jsx)(n.em,{children:"Settings \u2192 Environments \u2192 github-pages \u2192 Variables"}),"), plus vlo\u017e ",(0,o.jsx)(n.code,{children:"static/CNAME"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"2-lok\xe1lny-build",children:"2) Lok\xe1lny build"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"## GH Pages (project URL)\nCUSTOM_DOMAIN='' npm run build\n\n## Custom dom\xe9na\nCUSTOM_DOMAIN=mysite.example.com npm run build\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"package.json"})," by mal ma\u0165 skript ",(0,o.jsx)(n.code,{children:'build: "CUSTOM_DOMAIN=${CUSTOM_DOMAIN:-} docusaurus build"'}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\u26a0\ufe0f Pozn\xe1mka: n\xe1zov subdom\xe9ny nesmie obsahova\u0165 ",(0,o.jsx)(n.code,{children:"_"})," (podtr\u017en\xedk). Dodr\u017e naming konvenciu, pozri ",(0,o.jsx)(n.a,{href:"/sk/knifes/K000067-github-deployment-strategie/K000067-02",children:"Appendix \u2013 Naming Convention"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"navbarlinky--odpor\xfa\u010dania",children:"Navbar/Linky \u2013 odpor\xfa\u010dania"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Pou\u017e\xedvaj ",(0,o.jsx)(n.strong,{children:"relat\xedvne cesty"})," s ",(0,o.jsx)(n.code,{children:"to:"})," (nie absol\xfatne s pevnou dom\xe9nou). Pr\xedklad:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"{ to: '/docs/intro', label: 'Docs' }\n"})}),"\n","Docusaurus k tomu automaticky prid\xe1 spr\xe1vny ",(0,o.jsx)(n.code,{children:"baseUrl"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Pre obr\xe1zky a assety za\u010d\xednaj ",(0,o.jsx)(n.code,{children:"/img/\u2026"})," alebo pou\u017e\xedvaj importy; Docusaurus prefixuje baseUrl pri buildu."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"docsonly-m\xf3d-ak-nechce\u0161-homepage",children:"Docs\u2011only m\xf3d (ak nechce\u0161 homepage)"}),"\n",(0,o.jsxs)(n.p,{children:["Zme\u0148 ",(0,o.jsx)(n.code,{children:"routeBasePath"})," na ",(0,o.jsx)(n.code,{children:"'/'"})," a uisti sa, \u017ee m\xe1\u0161 ",(0,o.jsx)(n.code,{children:"docs/index.md"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"presets: [\n  ['classic', {\n    docs: { routeBasePath: '/' },\n    blog: false,\n  }],\n]\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"volite\u013en\xe9-banner-re\u017eimu-pre-dev",children:"Volite\u013en\xe9: banner re\u017eimu pre DEV"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"// src/theme/Root.tsx\nimport React from 'react';\nexport default function Root({children}) {\n  const mode = process.env.CUSTOM_DOMAIN ? 'custom-domain' : 'gh-pages';\n  return (\n    <>\n      {process.env.NODE_ENV === 'development' ? (\n        <div style={{position:'fixed',bottom:8,right:8,padding:'4px 8px',border:'1px solid',borderRadius:8,opacity:.7,background:'#fff'}}>\n          mode: {mode}\n        </div>\n      ) : null}\n      {children}\n    </>\n  );\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"r\xfdchly-checklist-pred-deployom",children:"R\xfdchly checklist (pred deployom)"}),"\n",(0,o.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,o.jsx)(n.code,{children:"CUSTOM_DOMAIN"})," je spr\xe1vne nastaven\xfd (pr\xe1zdny pre project URL, vyplnen\xfd pre custom)."]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Pri custom dom\xe9ne existuje ",(0,o.jsx)(n.code,{children:"static/CNAME"})," s ",(0,o.jsx)(n.strong,{children:"presne rovnakou"})," hodnotou."]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","V ",(0,o.jsx)(n.em,{children:"Settings \u2192 Pages"})," m\xe1\u0161 zvolen\xfd spr\xe1vny ",(0,o.jsx)(n.strong,{children:"Source"})," (Branch alebo Actions pod\u013ea zvolenej strat\xe9gie)."]}),"\n",(0,o.jsxs)(n.li,{className:"task-list-item",children:[(0,o.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Pri Actions existuje environment ",(0,o.jsx)(n.code,{children:"github-pages"})," (bez reviewers pri prvom deployi)."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:["\u017dlt\xfd banner o ",(0,o.jsx)(n.code,{children:"baseUrl"})]})," \u2013 pravdepodobne nesed\xed ",(0,o.jsx)(n.code,{children:"url/baseUrl"})," kombin\xe1cia. Skontroluj ",(0,o.jsx)(n.code,{children:"CUSTOM_DOMAIN"})," a hodnoty vypo\u010d\xedtan\xe9 v konfigu."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"404 po deployi"})," \u2013 ak pou\u017e\xedva\u0161 Actions a zlyh\xe1 ",(0,o.jsx)(n.code,{children:"deploy-pages@v4"})," s 404, ch\xfdba init Pages/",(0,o.jsx)(n.code,{children:"github-pages"})," env. (pozri hlavn\xfd K000067 alebo ",(0,o.jsx)(n.code,{children:"gh-init-pages"})," v Makefile appendixe)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"HTTPS nevznik\xe1"})," \u2013 ",(0,o.jsx)(n.code,{children:"CNAME"})," neplatn\xfd (napr. obsahuje ",(0,o.jsx)(n.code,{children:"_"}),") alebo e\u0161te nepropagovan\xfd DNS."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"s\xfavisiace",children:"S\xfavisiace"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.em,{children:"K000067 \u2013 GitHub Pages \u2013 strat\xe9gie nasadzovania (A/B/C)"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.em,{children:"K000067_makefile_appendix.md"})," \u2013 Makefile a hromadn\xfd init cez ",(0,o.jsx)(n.code,{children:"gh"})]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);